
<!doctype html>
<html class="no-js" lang="en">
<head>
    <!-- meta data -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- font-family -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Rufina:400,700" rel="stylesheet">
    
    <!-- title of site -->
    <title>WattWay</title>

    <!-- For favicon png -->
    <link rel="shortcut icon" type="image/icon" href="{{ asset('front/assets/logo/imgB.png') }}"/>
   
    <!-- CSS files -->
    <link rel="stylesheet" href="{{ asset('front/assets/css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ asset('front/assets/css/linearicons.css') }}">
    <link rel="stylesheet" href="{{ asset('front/assets/css/flaticon.css') }}">
    <link rel="stylesheet" href="{{ asset('front/assets/css/animate.css') }}">
    <link rel="stylesheet" href="{{ asset('front/assets/css/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ asset('front/assets/css/owl.theme.default.min.css') }}">
    <link rel="stylesheet" href="{{ asset('front/assets/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ asset('front/assets/css/bootsnav.css') }}">    
    <link rel="stylesheet" href="{{ asset('front/assets/css/style.css') }}">
    <link rel="stylesheet" href="{{ asset('front/assets/css/responsive.css') }}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ asset('front/assets/css/font-awesome.min.css') }}">
	


    <!-- HTML5 shim and Respond.js -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
    
<body>
    <!--[if lte IE 9]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif]-->
 {% block header %}
<!-- welcome-hero start -->

<section id="home" class="welcome-hero">
    <!-- top-area Start -->
    <div class="top-area">
        <div class="header-area">
            <!-- Start Navigation -->
            <nav class="navbar navbar-default bootsnav navbar-sticky navbar-scrollspy" data-minus-value-desktop="70" data-minus-value-mobile="55" data-speed="1000">
                <div class="container">
                    <!-- Start Header Navigation -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                            <i class="fa fa-bars"></i>
                        </button>
                        <img src="{{asset('back/img/img.png')}}" alt="Wattway" width="200" height="150">
                    </div><!--/.navbar-header-->
                    <!-- End Header Navigation -->

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse menu-ui-design" id="navbar-menu">
                        <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
                            <li class="scroll active"><a href="#home">Home</a></li>
                            <li class="scroll"><a href="#service">Catalogue</a></li>
							<li class="scroll"><a href="#Rent">Repair a car</a></li>
                            <li class="scroll"><a href="#order">WattShop</a></li>
                            <li class="scroll"><a href="#mechanic">Meet our team</a></li>
                            <li class="scroll"><a href="#new-cars">Submission</a></li>
                            <li class="scroll"><a href="#clients-say">Feedbacks</a></li>
							<li class="scroll"><a href="#car-status">Car Status</a></li>

                            
                            {% if app.user %}
                                <li class="dropdown">
    <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" style="padding-top: 0; padding-bottom: 0;">
        <span class="nav-username">{{ app.user.firstNameUser }} {{ app.user.lastNameUser }}</span>
        <div class="header-profile-container">
    {% if app.user.profilePicture %}
        <img src="{{ asset(app.user.profilePicture) }}" class="header-profile-pic" alt="Profile Picture">
    {% else %}
        <img src="{{ generate_avatar(app.user.emailUser, 80) }}" 
             class="header-profile-pic header-generated-avatar" 
             alt="Generated Avatar">
    {% endif %}
</div>
    </a>
    <ul class="dropdown-menu">
        <li><a href="{{ path('app_profile_edit') }}"><i class="fa fa-edit"></i> Edit Profile</a></li>
        <li><a href="{{ path('app_logout') }}"><i class="fa fa-sign-out"></i> Logout</a></li>
    </ul>
</li>
                            {% else %}
                                <li><a href="{{ path('app_login') }}"><i class="fa fa-sign-in"></i> Login</a></li>
                                <li><a href="{{ path('app_register') }}"><i class="fa fa-user-plus"></i> Register</a></li>
                            {% endif %}
                        </ul><!--/.nav -->
                    </div><!-- /.navbar-collapse -->
                </div><!--/.container-->
            </nav><!--/nav-->
            <!-- End Navigation -->
        </div><!--/.header-area-->
        <div class="clearfix"></div>
    </div><!-- /.top-area-->
    <!-- top-area End -->

    <div class="container">
        <div class="welcome-hero-txt">
            <h2>Get Your Dream Electric Car at the Best Price!</h2>
            <p>
                Looking for an electric vehicle? Whether you need to buy, rent, or repair an EV, we've got you covered with reliable service and great deals.
                Drive the future—sustainable, efficient, and affordable! ⚡🚗
            </p>
            <button class="welcome-btn" onclick="window.location.href='#'">Contact us</button>
        </div>
    </div>
</section><!--/.welcome-hero-->

<style>
    /* Exact match for nav items */
    .navbar-nav > li > a {
        padding: 22px 15px !important; /* Standard height for all nav items */
        line-height: 26px !important;
    }

    /* Profile section adjustments */
    .dropdown-toggle.nav-link {
        display: flex !important;
        align-items: center !important;
        height: 70px !important; /* Match navbar height exactly */
    }

    .nav-username {
        font-size: 14px !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
        color: white !important;
        padding: 0 5px 0 0 !important;
        line-height: 1 !important;
    }

    .header-profile-container {
        display: flex !important;
        align-items: center !important;
    }

    .header-profile-pic {
        width: 26px !important; /* Slightly smaller for better proportion */
        height: 26px !important;
        border-radius: 50%;
        object-fit: cover;
        border: 1px solid rgba(255,255,255,0.3);
    }

    .header-default-profile {
        width: 26px !important;
        height: 26px !important;
        border-radius: 50%;
        background-color: rgba(255,255,255,0.1);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Mobile adjustments */
    @media (max-width: 768px) {
        .navbar-nav > li > a {
            padding: 15px !important;
            line-height: 20px !important;
        }
        
        .dropdown-toggle.nav-link {
            height: auto !important;
        }
        
        .header-profile-pic,
        .header-default-profile {
            width: 22px !important;
            height: 22px !important;
        }

        
    }

    .header-profile-pic {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid rgba(255,255,255,0.3);
}

			
            /* Car Status Section Styles */
			.car-status .list-group {
				display: flex;
				flex-direction: column;
				gap: 1rem; /* controls the space between items */
			}

            .car-status {
                padding: 80px 0;
                background-color: #f8f9fa;
            }

            .car-status-card {
                border: none;
                border-radius: 10px;
                box-shadow: 0 0 20px rgba(0,0,0,0.1);
                transition: transform 0.3s ease;
            }

            .car-status-card:hover {
                transform: translateY(-5px);
            }

            .car-status-card .card-body {
                padding: 25px;
            }

            .car-status-card .card-title {
                color: #333;
                font-size: 1.25rem;
                margin-bottom: 20px;
            }

            .car-details p {
                margin-bottom: 10px;
                color: #666;
            }

            .car-details strong {
                color: #333;
            }

            .badge {
                padding: 5px 10px;
                border-radius: 20px;
                font-weight: 500;
            }

            .badge-success {
                background-color: #28a745;
            }

            .badge-warning {
                background-color: #ffc107;
                color: #212529;
            }

            .badge-info {
                background-color: #17a2b8;
            }

            .badge-secondary {
                background-color: #6c757d;
            }
			#car-status .modal-body .list-group .list-group-item {
				margin-bottom: 0.75rem;
			}
			/* Don’t double-space the last one */
			#car-status .modal-body .list-group .list-group-item:last-child {
				margin-bottom: 0;
			}
			/* Mechanic cards should look just like testimonial boxes */
			.mechanic-card {
			background: #fff;
			padding: 30px;
			border-radius: 5px;
			box-shadow: 0 0 15px rgba(0,0,0,0.1);
			transition: transform 0.3s ease;
			}
			.mechanic-card:hover {
			transform: translateY(-5px);
			}
			/* mimic the “italic testimonial text” style */
			.mechanic-card .card-text {
			font-style: italic;
			color: #666;
			}
			/* match the heading size & spacing */
			.mechanic-card .card-title {
			font-size: 1.1rem;
			margin-bottom: 0.75rem;
			}
			.mechanic-card .mechanic-avatar {
			margin-bottom: 1.5rem; /* or whatever you prefer */
			}
</style>
{% endblock %}
<!-- ************************************************************************************************************* -->

        <!-- Warehouse Management -->
		<!-- Translation -->
		<!-- Add a trigger for translation -->
		<div id="google_translate_element"></div>
		<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
		<script>
			function googleTranslateElementInit() {
				new google.translate.TranslateElement(
					{ pageLanguage: 'en', autoDisplay: false },
					'google_translate_element'
				);
			}
		</script>

		<!-- Browse catalogue -->
		{% block catalogueBrowsing %}
		<section id="service" class="service">
			<div class="container">
				<div class="service-content">
					<h1 style="font-size: 4rem; font-weight: 700; color: #132ec2; text-align: center; text-transform: uppercase; margin-bottom: 20px; animation: fadeIn 1.5s ease-in-out;">
						Our car collection
					</h1>
					{% include 'frontend/Warehouse/browseCatalogue.html.twig' with {'cars' : cars , 'maximumCarPrice': maximumCarPrice, 'minimumCarPrice': minimumCarPrice , 'brands':brands} %}
					</div>
				</div>
			</div><!--/.container-->

		</section><!--/.service-->
		{% endblock %}


		<!-- Rent a Car -->
		{% block carRenting %}
		<section id="Rent" class="service">
			<div class="container">
				<div class="service-content">
					<h1 style="font-size: 4rem; font-weight: 700; color: #132ec2; text-align: center; text-transform: uppercase; margin-bottom: 20px; animation: fadeIn 1.5s ease-in-out;">
						Indulge in our car repair service
					</h1>
					{% include 'frontend/Warehouse/repairCar.html.twig' with {'repaircarform' : repaircarform} %}
					</div>
				</div>
			</div><!--/.container-->

		</section><!--/.service-->
		{% endblock %}

<!-- ************************************************************************************************************* -->

            <!-- Order Management  -->
		{% block order %}
		<h1 style="font-size: 4rem; font-weight: 700; color: #132ec2; text-align: center; text-transform: uppercase; margin-bottom: 20px; animation: fadeIn 1.5s ease-in-out;">
						Check your spares in WattShop
					</h1>
		{% include 'frontend/order/order.html.twig' with {'items' : items,
            'itemQuantities' : itemQuantities,
            'clientItems' : clientItems,
            'adminItems' : adminItems } %}



		{% endblock %}


<!-- ************************************************************************************************************* -->

		<!-- Mechanics -->
		{% block mechanics %}
		<section id="mechanic" class="mechanic">
		<div class="container">
			<div class="new-cars-content">
			<h1 style="font-size: 4rem; font-weight: 700; color: #132ec2; text-align: center; text-transform: uppercase; margin-bottom: 20px; animation: fadeIn 1.5s ease-in-out;">
						Meet Our Team
					</h1>

			<div class="owl-carousel mechanic-carousel">
				{% for mechanic in mechanics %}
				<div class="item">
					<div class="card mechanic-card h-100">
					<div class="card-body text-center">
						<div class="mechanic-avatar mb-4">
						{% if mechanic.imgMechanic %}
							<img src="{{ asset('uploads/mechanics/' ~ mechanic.imgMechanic) }}"
								alt="{{ mechanic.nameMechanic }}"
								class="rounded-circle">
						{% else %}
							<img src="{{ asset('front/assets/images/mechanic-placeholder.jpg') }}"
								alt="{{ mechanic.nameMechanic }}"
								class="rounded-circle">
						{% endif %}
						</div>
						<h5 class="card-title mt-3 mb-2 text-muted">{{ mechanic.emailMechanic }}</h5>
						<p class="card-title">{{ mechanic.specialityMechanic }}</p>
						<p>{{ mechanic.nameMechanic }}</p>
					</div>
					</div>
				</div>
				{% else %}
				<div class="item">
					<p class="text-muted text-center">No mechanics available at the moment.</p>
				</div>
				{% endfor %}
			</div>
			</div>
		</div>
		</section>
		{% endblock %}
	


<!-- ************************************************************************************************************* -->


		<!-- Submission -->
		{% block listSubmission %}
        <section id="new-cars" class="new-cars">
            <div class="container">
                {% include 'frontend/submission/index.html.twig' with {
                    'submissions': submissions,
                    'formSubmission': formSubmission
             
                } %}
            </div>
        </section>
        {% endblock %}
        
        {% block submission %}
        {# This block can remain empty since we're handling everything in listSubmission #}
        {% endblock %}
<!-- ************************************************************************************************************* -->


		<!-- FeedBack -->
		{% block feedback %}
    
    {% include 'frontend/user/feedback.html.twig' with {'feedbacks' : feedbacks} %}

		{% endblock %}	

<!-- ************************************************************************************************************* -->

		<!-- Car Status -->
		
		{% block carStatus %}
			<section id="car-status" class="car-status">
			<div class="container">
				<h1 style="font-size: 4rem; font-weight: 700; color: #132ec2; text-align: center; text-transform: uppercase; margin-bottom: 20px; animation: fadeIn 1.5s ease-in-out;">
						Your Cars And Assignments
					</h1>
				<div class="row">
				{% for car in userCars %}
					<div class="col-md-4 mb-4">
						<div
							class="card car-status-card"
							data-toggle="modal"
							data-target="#carModal{{ car.idCar }}"
							style="cursor: pointer;"
						>
							<div class="card-body">
								<h5 class="card-title">{{ car.brandCar }} {{ car.modelCar }} ({{ car.yearCar }})</h5>
								<p><strong>VIN:</strong> {{ car.vinCode }}</p>
								<p><strong>Status:</strong> {{ car.statusCar }}</p>
							</div>
						</div>
					</div>

					<div
						class="modal fade"
						id="carModal{{ car.idCar }}"
						tabindex="-1"
						role="dialog"
						aria-labelledby="carModalLabel{{ car.idCar }}"
						aria-hidden="true"
					>
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5
										class="modal-title"
										id="carModalLabel{{ car.idCar }}"
									>Details for {{ car.brandCar }} {{ car.modelCar }}</h5>
									<button
										type="button"
										class="close"
										data-dismiss="modal"
										aria-label="Close"
									>
										<span aria-hidden="true">&times;</span>
									</button>
								</div>

								<div class="modal-body">
									<div class="mb-4">
										<p class="mb-1"><strong>VIN:</strong> {{ car.vinCode }}</p>
										<p class="mb-0"><strong>Overall Status:</strong> {{ car.statusCar }}</p>
									</div>

									<h6 class="mt-3 mb-2">Active Assignments</h6>

									<div class="list-group">
										{# Track whether we printed anything #}
										{% set printed = false %}

										{% for assignment in car.assignments %}
											{% if assignment.statusAssignment in ['Pending','In Progress'] %}
												{% set printed = true %}
												<div class="list-group-item mb-3">
													<div class="d-flex justify-content-between align-items-center">
														<span>{{ assignment.descriptionAssignment }}</span>
														<span class="badge badge-info">{{ assignment.statusAssignment }}</span>
													</div>
													<small class="text-muted">Mechanics on this job:</small>
													<ul class="pl-3 mb-0 mt-1">
														{% for mech in assignment.mechanics %}
															<li>{{ mech.nameMechanic }} — {{ mech.emailMechanic }}</li>
														{% endfor %}
													</ul>
												</div>
											{% endif %}
										{% endfor %}

										{% if not printed %}
											<div class="list-group-item text-muted">
												No pending or in‑progress assignments.
											</div>
										{% endif %}
									</div>
								</div>

								<div class="modal-footer">
									<button
										type="button"
										class="btn btn-secondary"
										data-dismiss="modal"
									>Close</button>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
				</div>
			</div>
			</section>
			{% endblock %}

		

		



<!-- ************************************************************************************************************* -->

		<!-- footer start -->
		{% block footer %}
		<footer id="contact" class="contact">
			<div class="container">
				<div class="footer-content">
					<!-- Left Column -->
					<div class="row">
						<div class="col-md-6">
							<div class="footer-brand">
								<h2>WATTWAY</h2>
								<p class="company-description">
									Your trusted partner in electric vehicle solutions. We provide top-quality electric cars, maintenance 
									services, and expert guidance for sustainable transportation.
								</p>
								<p class="contact-email">contact@wattway.com</p>
							</div>
						</div>

						<!-- Right Column -->
						<div class="col-md-6">
							<div class="business-hours-section">
								<h3>Business Hours</h3>
								<ul class="business-hours-list">
									<li>Monday - Friday: 8:00 AM - 6:00 PM</li>
									<li>Saturday: 9:00 AM - 4:00 PM</li>
									<li>Sunday: Closed</li>
									<li class="emergency-support">24/7 Emergency Support Available</li>
								</ul>
							</div>
						</div>
					</div>
				</div>

				<!-- Footer Bottom -->
				<div class="footer-bottom">
					<div class="row">
						<div class="col-md-6">
							<p class="copyright">© Copyright. Designed and Developed by WattWay.</p>
						</div>
						<div class="col-md-6">
							<div class="social-links">
								<a href="#" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
								<a href="#" aria-label="Instagram"><i class="fa fa-instagram"></i></a>
								<a href="#" aria-label="LinkedIn"><i class="fa fa-linkedin"></i></a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
		{% endblock %}

		<!-- JavaScript files -->
		{% block javascript %}
		<script src="{{ asset('front/assets/js/jquery.js') }}"></script>
        <script src="{{ asset('front/assets/js/bootstrap.min.js') }}"></script>
		<script src="{{ asset('front/assets/js/bootsnav.js') }}"></script>
		<script src="{{ asset('front/assets/js/owl.carousel.min.js') }}"></script>
		<script src="{{ asset('front/assets/js/custom.js') }}"></script>

		<!-- External scripts remain unchanged -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
		<script>
			$(document).ready(function(){
			$('.mechanic-carousel').owlCarousel({
				loop:      true,
				margin:    20,
				nav:       true,
				dots:      false,
				responsive:{
				0:   { items:1 },
				600: { items:2 },
				992: { items:3 }
				}
			});
			});
		</script>
		{% endblock %}
	</body>
</html>
